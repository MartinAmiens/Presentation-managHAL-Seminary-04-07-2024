---
title: "Manipulation de données bibliométrique via {managHAL}"
author: 
  - name: "Martin AMIENS"
    affiliation: "MIA - Paris-Saclay"
date: "04-07-2024"
tutors:
  - name: "Julie AUBERT"
  - name: "Pierre BARBILLON"
---

```{r, include=FALSE, echo = FALSE, warning = FALSE, message=FALSE}
library(igraph, quietly = TRUE)
library(tidyr, quietly = TRUE)
library(managHAL, quietly = TRUE)
library(dplyr, quietly = TRUE)
library(reshape2, quietly = TRUE)
library (readxl, quietly = TRUE)
library(visNetwork, quietly = TRUE)
library(sbm, quietly = TRUE)
library(tibble, quietly = TRUE)
```

::: notes
## Martin AMIENS {.center}

-   Stagiaire au sein de l'unité MIA - Paris-Saclay.
-   Etudiant en première année du master Bio-Informatique et Bio-Statistiques à Paris-Saclay.
-   Tuteurs : Julie AUBERT, Pierre BARBILLON
:::

## Plan {.center}

- Contexte du stage
- Objectifs du stage
- introduction aux Réseaux
- Accessibilité et généricité de {managHAL}
- Ajout de fonctionnalités à {managHAL}
- Discussion, Perspectives et avenir du package

## Contexte {.center}

-   DRIT : Direction des Recherches et de l'Innovation Technologique

. . .

-   Sciences Ouvertes : "est la diffusion sans entrave des publications et des données de la recherche." (Webmestre,2021)

. . .

::: columns
::: {.column width="40%"}
-   HAL : Hyper Articles en Ligne
:::

::: {.column width="60%"}
![Crédit : CCSDForge](img/HAL_logo.png)
:::
:::

. . . 

- {ManagHAL} : Package R d'extraction de données bibliométriques de HAL

::: notes
Mon stage est financé par la direction des recherches et de l'innovation technologique (DRIT) qui dirige la cellule HAL d'agroParisTech. je l'ai réalisé sous la tutelle de julie AUBERT et Pierre BARBILLON durant 2 mois et 17 jours. Le stage s'est inscrit dans le contexte de la science ouverte (signifie "la diffusion sans entrave des publications et des données de la recherche."), HAL est l'archive nationale pour la diffusion ouverte des résultats de recherche, développée par le CNRS en 2001. Elle est la plateforme majeure de réference au sein de la communauté scientifique française actuelle pour la mise en ligne des publicaitons scientifiques. D'ailleurs les financements ne sont données aux chercheurs que si ces derniers ont mis toutes leurs publications sur la plateforme HAL. Hal dispose d'une api complexe permettant de récuperer les données (dites) bibliométriques associés aux publications. (auteurs, identifiants des auteurs, des strctures,...)

**Utilisation d'API** : Extraction et analyse des données via des outils comme RStudio. décrire peut etre plus en profondeur ? parler des différents champs possible pour récuperer differentes formes de résultats.
:::

## Objectifs du stage {.center}

::: notes
au cours de ce stage, j'avais deux objectifs : Rendre le package accesible et générique, c'est à dire utilisable par d'autres que par l'unité MIA - PS. et ajouter des fonctionnalités permettant d'analyser les données bibliométriques récupérées via managHAL.
:::

-   Accessibilité et généricité de {managHAL}

. . .

-   Ajout de fonctionnalités à {managHAL}

## Accessibilité et généricité de {managHAL}

::: notes
Parler API hal, de son fonctionnement,
:::

<center>

<iframe src="https://api.archives-ouvertes.fr/docs/search/?schema=field-types#field-types" width="100%" height="650px">

</iframe>

</center>

## Accessibilité et généricité de {managHAL}

(parler vite fait de pourquoi c'est générique (identifiant structure))

::: notes

L'exécution des fonctions est réalisée par le biais d'un exemple. Cet exemple est basé sur des données de l'UMR MIA-Paris-Saclay. Il est important de noter que mon stage se terminant le 26 juillet, Le package est encore en développement. Certaines fonctionnalités sont encore en travail. Les fonctions présentées fonctionnent dans le cadre de l'exemple. Si vous souhaitez exécuter les scripts, il est nécessaire d'avoir accès au package {managHAL}.

Ainsi avec les anciennes fonctions du packages réadaptés, il est possible de charger un data.frame à partir d'une table fournie par la RH, il est aussi possible d'obtenir un data.frame contenant les données bibliométriques d'un identifaints de laboratoire. Ce qui n'etait pas le cas auparavant et permet plus d'usage pour des laboratoires n'ayant pas acces à tous les identifiants des auteurs.
me permet de parler rapidement de ce que je peux obtenir comme résultats de base avec l'ancienne version du package, puis des résultats obtenus avec la nouvelle version du package (surtout ne pas mettre de code afin de faire une presentation correcte, facile à suivre, claire et concise)par contre mettre des images des reseaux obtenus meme si pas satisfaisants... mettre aussi les résultats obtenus avec un sbm. c'est la partie qui peut prendre e plus de diapos si pas assez de place alors liberez des diapos des autres partie et les mettre dans les diapos questions.
:::

::: panel-tabset
### Tab A

```{r load-team-table}
data_RH_csv_Example <- load_team_table(filter_id = TRUE, date_cols = c(6,7), filepath_or_url = "./data/Data_RH_Example.csv")
# afin de ne garder que les lignes avec un idhal correct
data_RH_csv_Example <- data_RH_csv_Example[which(!is.na(data_RH_csv_Example$idhal)),]
data_RH_csv_Example <- as_tibble(data_RH_csv_Example)
data_RH_csv_Example
```

### Tab B

```{r Hal-extract-csv}
date_min = "01/01/2022"
date_max = "01/01/2023"

# Publications à partir d'un id de laboratoire.
HAL_publis_Labo <- managHAL::HAL_extract_csv(id = 1002311, date_min,date_max, type_id = "struct_id", add_output = c("structAcronym_s","structId_i", "structHasAlphaAuthIdHalPersonid_fs"))
HAL_publis_Labo <- as_tibble(HAL_publis_Labo)
HAL_publis_Labo[1,]

# Publications à partir d'ids auteurs
HAL_publis_auteurs <- managHAL::HAL_extract_csv(id = data_RH_csv_Example[,12][2,] , date_min,date_max, type_id = "person_id")
HAL_publis_auteurs <- as_tibble(HAL_publis_auteurs)
HAL_publis_auteurs
```
:::

## Introduction aux Réseaux

Un réseau est composé de :

- noeuds (entités)

- arêtes (interactions entre ces entités)

::: panel-tabset

#### Réseau Unipartite

```{r}
#| code-fold: true
# Création d'un réseau unipartite
set.seed(42) # Pour la reproductibilité 
unipartite <- erdos.renyi.game(10, 0.3)
unipartite_graph <- plot(unipartite, main = "Réseau Unipartite")

```

#### Réseau Bipartite

```{r}
#| code-fold: true
# Création d'un réseau bipartite Noms des nœuds
nodes_A <- c("A1", "A2", "A3")
nodes_B <- c("B1", "B2", "B3", "B4")
# Liste des arêtes
edges <- c("A1", "B1", "A1", "B2", "A2", "B1", "A2",
    "B2", "A2", "B3", "A3", "B2", "A3", "B4")
# Création du graphe
bipartite <- graph(edges, directed = FALSE)
V(bipartite)$type <- bipartite_mapping(bipartite)$type
plot(bipartite, layout = layout_as_bipartite, vertex.color = c("skyblue",
    "salmon")[V(bipartite)$type + 1], vertex.label.color = "black",
    vertex.shape = "circle", vertex.size = 30, edge.width = 2,
    main = "Réseau Bipartite")
```

#### Exemples

A : Exemple de Réseau trophique, Crédit : (Kéfi et al. 2016)

B : RAD51 et son réseau d'interaction de sa famille de gènes, Crédits : (Li et al., 2021)

::: {.r-stack}
![](img/reseau_trophique.png){.fragment width="300" height="300"}

![](img/Reseau_interaction_genes.png){.fragment width="300" height="300"}

:::

:::

::: {.notes}
Un réseau d’interaction est constitué de nœuds (les entités) et d’arêtes (les liens entre ces entités). Il existe différent types de réseaux : les réseaux unipartites composés uniquement d'un type de neouds, les réseaux bipartites composés de deux types de noeuds et bien sur d'autres types dont je ne parlerais pas aujourd'hui. Dans le cadre du package {managHAl}, j'utiliserai les réseaux pour modéliser un réseau de co-publications (ou co-auteurs). Les noeuds représenteront des auteurs, et les arêtes entre ces noeuds (auteurs) seront l'existence de publications scientifiques co-écrite par les deux noeuds. La taille d'un nœud représentera le nombre de publications écrites par cet auteur (noeud) et la largeur d'une arête pourra correspondre au nombre de publications co-ecrites par les deux noeuds (co-auteurs). Les réseaux ne sont cependant pas exclusifs à l'analyse de données bibliométriques. En effet, les réseaux sont utilisés comme représentation et comme objet d'analyse statistique dans de nombreux domaines. Par exemple, des réseaux écologiques peuvent être réalisé, ici un réseau trophique tiré de la publication de ... ou encore un réseau de genes (tiré de la publication de ...). Je n'en dirais pas plus sur le sujet il me semble que louis lacoste qui présente aujourd'hui aussi discutera de réseau écologique et donc aura tout le loisir de répondre à vos questions sur le sujet.


:::

## Ajout de fonctionnalité à {managHAL}

### construction d'un réseau de co-auteur

<iframe src="img/Full_Network_Co-authors_Example_managHAL.html" width="100%" height="300px"> </iframe>



## Ajout de fonctionnalité à {managHAL}

### Modélisation en blocs stochastiques

dire qu'il est possible de réaliser des modèles à partir de ces données (sans expliquer), juste une phrase sur on regroupe les noeuds par profils de connexion similaire. Montrer les deux graphes obtenus avec couleur via sbm.

# Discussion, Perspectives et avenir du package

parler des limitations vu par rapport aux quatres graphes précédents, comment je peux les régler (analyses sur composantes connexe), parler du développement du package et de ce qui sera disponible, la finalité du stage.

# Merci de m'avoir écouté

Questions ?

## Méthodes informatiques

ne faire que si j'ai le temps, les mettres dans les diapos de questions possible ? parler version Rstudio, package utilisés, explication de ...

## quelles sont les questions qui peuvent venir au cours de ma présentation,

## quelles sont les choses dont je n'ai pas parlé au cours de ma présentation,

## sources

<https://www.ouvrirlascience.fr/plan-national-pour-la-science-ouverte/>
